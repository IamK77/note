# 网络层

## IPv4

`32`位的`唯一`标识符, 由ICANN分配

32位二进制地址, 以`.`分割为四个8位二进制数

```
例: xxxxxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx
```

这4个部分又分为`网络地址`和`主机地址`

分为A, B, C, D, E五类

- A类:网络号以`0`起始, 前8位为网络号, 后24位为主机号    
    IPv4开头为(0-127)
    ```
    例: |0xxxxxxx.|xxxxxxxx.xxxxxxxx.xxxxxxxx
    ||中为网络号, 其余为主机号
    ```
- B类:网络号以`10`起始, 前16位为网络号, 后16位为主机号
    IPv4开头为(128-191)
    ```
    例: |10xxxxxx.xxxxxxxx.|xxxxxxxx.xxxxxxxx
    ||中为网络号, 其余为主机号
    ```
- C类:网络号以`110`起始, 前24位为网络号, 后8位为主机号
    IPv4开头为(192-223)
    ```
    例: |110xxxxx.xxxxxxxx.xxxxxxxx.|xxxxxxxx
    ||中为网络号, 其余为主机号
    ```

D, E类在下文介绍

网络号中的每一个数字都表示一个网络, 主机号中的每一个数字都表示该网络中的一台主机

例如英国国防部曾经获得的`25.0.0.0`, 该网络属A类网络,其网络号为`00011001`, 主机号范围为`00000000.00000000.00000000`到`11111111.11111111.11111111`, 共$2^{24}$个主机...吗?  
实际上是$2^{24}-2$个主机, 原因下文再说

A类一般分配给大型机构, B类分配给中型机构, C类分配给小型机构

### 一些特殊的网络地址

以目前(25/11/2024)一台位于HK的阿里云服务器的IPv4 185.148.14.47为例

- 主机号为全0的地址表示该网络的网络号, 即表示网络本身
    例: 185.148.14.0即185.148.14.47所属的网络的网络号

- 主机号为全1的地址表示该网络的广播地址, 即向该地址发送的数据包会被该网络中的所有主机接收
    例: 185.148.14.255即185.148.14.47所属的网络的广播地址

- 127.X.X.X为`回环地址`, 用于本地测试, 发送到该地址的数据包会被本机接收
    发送往该地址的IP数据报永远不会出现在任何网络上
    例: 127.0.0.1, 多用于开发时网络测试

- 32位全为0的地址表示`本网络`上的`本主机`, 用于`本网络`内部通信
    例: 0.0.0.0, 部署时采用该地址

- 32位全为1的地址表示`本网络`上的`广播地址`, 用于`本网络`内部广播
    例: 255.255.255.255

上文说到为$2^{24}-2$个主机, 是因为每个网络的主机号中的全0和全1地址都有特殊含义, 不能用于分配给主机

## 私有IP地址

- A类: `10.0.0.0`-`10.255.255.255`, 1个
- B类: `172.16.0.0`-`172.31.255.255`, 16个
- C类: `192.168.0.0`-`192.168.255.255`, 255个

这些地址不能在公网中被访问, 路由器一律不转发

C类中的地址即为局域网地址的IP段

## 子网掩码与无分类编址CIDR

有时巨型网络拥有极大量主机号(如25.0.0.0的$2^{24}-2$个主机), 但是利用率很低 















